<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>teeno.xyz | Drive</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<link rel="icon" href="images/favicon.png" type="image/png">
<style>
/* Drive page overrides */
#file-list {
  max-width: 800px;
  margin: 40px auto 0;
  background: rgba(255,255,255,0.03);
  border: 2px solid rgba(255,255,255,0.06);
  border-radius: 20px;
  padding: 30px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  color: var(--text);
  font-family: 'Space Grotesk', sans-serif;
  backdrop-filter: blur(12px);
}

.item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 20px;
  border-radius: 12px;
  transition: all 0.3s ease;
  background: rgba(255,255,255,0.02);
}
.item:hover {
  background: rgba(110,231,255,0.15);
  transform: translateX(3px);
}

.folder { font-weight:600; cursor:pointer; color:var(--neon); flex:1; }
.folder::before { content: "üìÅ "; margin-right:8px; }
.file { flex:1; color:var(--text); }
.file::before { content: "üìÑ "; margin-right:8px; }

.download-link, .copy-btn {
  margin-left:10px;
  text-decoration:none;
  font-size:0.9rem;
  color:var(--neon);
  transition:0.3s;
}
.download-link:hover, .copy-btn:hover { color: var(--accent); cursor:pointer; }
.subfolder { margin-left:25px; display:flex; flex-direction:column; gap:6px; }

/* Custom cursor */
.cursor-circle {
  position: fixed;
  width: 20px;
  height: 20px;
  background: var(--neon);
  border-radius: 50%;
  pointer-events: none;
  transform: translate(-50%, -50%);
  mix-blend-mode: difference;
  transition: width 0.2s ease, height 0.2s ease;
}
</style>
</head>
<body data-name="- teeno -" data-tagline="Producer ‚Ä¢ Designer ‚Ä¢ Creator">

<div id="app">
  <canvas id="bgCanvas" aria-hidden="true"></canvas>

  <header class="corner-controls">
    <button id="playPause" class="icon-btn" aria-label="Toggle music">‚èµ</button>
    <a class="icon-btn" href="/" aria-label="Home">‚çü</a>
  </header>

  <main class="hero">
    <div class="hero-inner">
      <div class="profile-wrap">
        <div class="neon-ring"></div>
        <img src="images/profile.png" alt="Profile" class="profile">
      </div>

      <div class="text">
        <h1 id="name">- teeno -</h1>
        <p id="tagline">Producer ‚Ä¢ Designer ‚Ä¢ Creator</p>
      </div>
    </div>

    <!-- Drive file list -->
    <div id="file-list">Loading files...</div>
  </main>

  <footer>
    Built with ‚ú® by <a href="https://github.com/lerpyypluh" target="_blank">Teeno</a>
  </footer>

  <div class="cursor-circle" id="cursor"></div>
</div>

<script>
// Custom cursor
const cursor = document.getElementById('cursor');
document.addEventListener('mousemove', e => {
  cursor.style.left = e.clientX + 'px';
  cursor.style.top = e.clientY + 'px';
});

// GitHub /drive fetch
const owner = "lerpyypluh";
const repo = "bio";
const fileList = document.getElementById("file-list");

async function fetchContents(path = "drive", container) {
  try {
    const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`);
    if (!response.ok) throw new Error(`Failed to fetch files at path: ${path}`);
    const items = await response.json();

    for (const item of items) {
      const el = document.createElement("div");
      el.classList.add("item");
      const fullPath = item.path;
      el.dataset.path = fullPath;

      if(item.type === "dir") {
        el.classList.add("folder");
        const folderName = document.createElement("span");
        folderName.textContent = item.name;
        el.appendChild(folderName);

        const subContainer = document.createElement("div");
        subContainer.classList.add("subfolder");
        subContainer.style.display = "none";
        container.appendChild(el);
        container.appendChild(subContainer);

        let loaded = false;
        el.addEventListener("click", () => {
          if(subContainer.style.display === "none") {
            subContainer.style.display = "flex";
            if(!loaded) { fetchContents(fullPath, subContainer); loaded = true; }
          } else subContainer.style.display = "none";
        });

      } else if(item.type === "file") {
        el.classList.add("file");
        const link = document.createElement("a");
        link.href = item.download_url;
        link.textContent = item.name;
        link.target = "_blank";
        link.className = "download-link";
        el.appendChild(link);

        const copyBtn = document.createElement("button");
        copyBtn.textContent = "üîó";
        copyBtn.className = "copy-btn";
        copyBtn.title = "Copy file URL";
        copyBtn.addEventListener("click", () => navigator.clipboard.writeText(item.download_url));
        el.appendChild(copyBtn);

        container.appendChild(el);
      }
    }

  } catch(err) {
    container.innerHTML = `<p style="color:red;">Error: ${err.message}</p>`;
    console.error(err);
  }
}

// Initialize
fileList.innerHTML = "";
fetchContents("drive", fileList);
</script>

<script src="script.js" defer></script>
</body>
</html>
